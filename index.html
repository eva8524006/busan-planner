<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Busan trip 2025</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Noto Sans TC', sans-serif; background-color: #f8fafc; margin: 0; padding: 0; }
        .header-banner { width: 100%; height: 320px; background-image: url('https://images.unsplash.com/photo-1546036157-1913988f6158?q=80&w=2070&auto=format&fit=crop'); background-size: cover; background-position: center; position: relative; }
        .header-overlay { position: absolute; inset: 0; background: linear-gradient(to top, rgba(0,0,0,0.85) 0%, rgba(0,0,0,0.2) 50%, rgba(0,0,0,0.4) 100%); }
        .main-content { margin-top: -30px; border-radius: 40px 40px 0 0; background: #f8fafc; min-height: 80vh; padding: 24px; position: relative; box-shadow: 0 -10px 25px rgba(0,0,0,0.1); }
        .nav-container { position: absolute; bottom: 12px; right: 16px; display: flex; gap: 8px; background: rgba(255,255,255,0.92); backdrop-filter: blur(10px); padding: 6px; border-radius: 22px; z-index: 30; }
        .tab-btn { transition: all 0.3s; display: flex; align-items: center; justify-content: center; width: 42px; height: 42px; border-radius: 14px; }
        .tab-btn.active { background-color: #3b82f6; color: white; }
    </style>
</head>
<body>
    <div id="app" class="max-w-md mx-auto relative min-h-screen">
        
        <div class="fixed top-4 left-4 z-50">
            <button @click="exportData" class="bg-black/80 text-white text-[10px] px-3 py-2 rounded-full backdrop-blur-md flex items-center gap-2">
                <i data-lucide="share-2" class="w-3 h-3"></i> 複製最新資料給AI更新
            </button>
        </div>

        <header class="header-banner">
            <div class="header-overlay"></div>
            <div class="absolute bottom-[85px] right-6 z-10 text-right">
                <h1 class="text-4xl font-black text-yellow-400 uppercase tracking-tighter">Busan trip</h1>
                <p class="text-[10px] font-bold text-white tracking-[0.3em] mt-1 opacity-90">2025 SPRING TRAVEL</p>
            </div>
            <div class="nav-container">
                <button @click="currentTab = 'itinerary'" :class="['tab-btn', currentTab==='itinerary'?'active':'text-gray-400']"><i data-lucide="map-pin"></i></button>
                <button @click="currentTab = 'info'" :class="['tab-btn', currentTab==='info'?'active':'text-gray-400']"><i data-lucide="info"></i></button>
                <button @click="currentTab = 'shop'" :class="['tab-btn', currentTab==='shop'?'active':'text-gray-400']"><i data-lucide="shopping-basket"></i></button>
                <button @click="currentTab = 'cost'" :class="['tab-btn', currentTab==='cost'?'active':'text-gray-400']"><i data-lucide="wallet"></i></button>
            </div>
        </header>

        <main class="main-content pb-32">
            <div v-if="currentTab === 'itinerary'">
                <div class="flex overflow-x-auto gap-3 mb-6 py-2 no-scrollbar">
                    <div v-for="d in dates" :key="d.id" @click="selectedDate = d.id" :class="['flex-shrink-0 w-16 h-20 rounded-3xl border flex flex-col items-center justify-center cursor-pointer transition-all', selectedDate === d.id ? 'bg-blue-500 text-white border-blue-500' : 'bg-white text-gray-400 border-gray-100']">
                        <span class="text-[10px] font-bold uppercase mb-1">{{ d.week }}</span>
                        <span class="text-xl font-bold font-mono">{{ d.day }}</span>
                    </div>
                </div>
                <div class="space-y-4">
                    <div v-for="item in sortedItinerary" :key="item.id" class="bg-white p-4 rounded-[1.8rem] border border-gray-100 shadow-sm flex gap-4 items-center">
                        <div class="p-3 rounded-2xl bg-blue-50 text-blue-500"><i :data-lucide="item.icon || 'map-pin'" class="w-5 h-5"></i></div>
                        <div class="flex-1">
                            <h3 class="font-bold text-gray-800 text-sm">{{ item.name }}</h3>
                            <p class="text-[10px] text-gray-400">{{ item.time || '全天' }}</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <p class="text-center text-gray-300 text-[10px] mt-10">資料將儲存在此設備瀏覽器中</p>
        </main>
    </div>

    <script>
        const { createApp, ref, computed, onMounted } = Vue;
        createApp({
            setup() {
                const DB_KEY = 'busan_vFinal_2025_Full_Sync';
                const currentTab = ref('itinerary');
                const selectedDate = ref('4/10');
                const dates = [{id:'4/10',week:'Fri',day:'10'},{id:'4/11',week:'Sat',day:'11'},{id:'4/12',week:'Sun',day:'12'}];
                
                // 這裡會讀取你目前手動新增的所有東西
                const db = ref(JSON.parse(localStorage.getItem(DB_KEY)) || { itinerary: [], shop: [], cost: [] });

                const sortedItinerary = computed(() => db.value.itinerary.filter(i => i.date === selectedDate.value));

                const exportData = () => {
                    const dataStr = JSON.stringify(db.value, null, 2);
                    navigator.clipboard.writeText(dataStr).then(() => {
                        alert('最新資料已複製！請回到對話視窗貼給我更新。');
                    });
                };

                onMounted(() => { if(window.lucide) window.lucide.createIcons(); });

                return { currentTab, selectedDate, dates, db, sortedItinerary, exportData };
            }
        }).mount('#app');
    </script>
</body>
</html>
